{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block content %}
    <div class="content-section">
        <form id="movementsForm" method="POST" data-movement-url="{% url 'users:ajax_load_movements' %}">
            {% csrf_token %}

            <div class="form-group">
                {{ form|crispy }}
                <button type="button">CREATE</button>
                <a href="{% url 'users:employee_movements_changelist' %}">CANCEL</a>
            </div>
        </form>
    </div>
{% endblock content %}

{% block scripts %}
    <script>
        $("#id_parameter").change(function () {
            let url = $("#movementsForm").attr('data-movement-url');
            console.log(url);
            let parameter_id = $(this).val();

            $.ajax({
                url: url,
                data: {
                    'parameter': parameter_id
                },
                success: function (data) {
                    $("#id_move_from").html(data);
                    $("#id_move_to").html(data);
                }
            });
        })
    </script>
{% endblock scripts %}